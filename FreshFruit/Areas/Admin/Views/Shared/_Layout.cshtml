<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=0">
    <meta name="description" content="POS - Bootstrap Admin Template">
    <meta name="keywords"
          content="admin, estimates, bootstrap, business, corporate, creative, management, minimal, modern,  html5, responsive">
    <meta name="author" content="Dreamguys - Bootstrap Admin Template">
    <meta name="robots" content="noindex, nofollow">
    <title>Admin</title>

    <style>
        .submenu ul {
            display: none;
            padding-left: 20px;
        }

        .submenu.active > ul {
            display: block;
        }

        .submenu > a {
            cursor: pointer;
        }

        .submenu ul li a.active {
            font-weight: bold;
            color: #f39c12;
        }

        }

    </style>
    <link rel="shortcut icon" type="image/x-icon"
          href="~/admin/assets/img/favicon.jpg">

    <link rel="stylesheet" href="~/admin/assets/css/bootstrap.min.css">

    <link rel="stylesheet" href="~/admin/assets/css/animate.css">

    <link rel="stylesheet" href="~/admin/assets/css/dataTables.bootstrap4.min.css">

    <link rel="stylesheet"
          href="~/admin/assets/plugins/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet"
          href="~/admin/assets/plugins/fontawesome/css/all.min.css">

    <link rel="stylesheet" href="~/admin/assets/css/style.css">
    <link href="~/lib/select2/css/select2.min.css" rel="stylesheet" />
    <!-- Select2 -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    

</head>
<body>
    <div id="global-loader">
        <div class="whirly-loader"> </div>
    </div>

    <div class="main-wrapper">

        <div class="header">

            <div class="header-left active">
                <a href="index.html" class="logo">
                    <img src="~/admin/assets/img/logo.png" alt>
                </a>
                <a href="index.html" class="logo-small">
                    <img src="~/admin/assets/img/logo-small.png" alt>
                </a>
                <a id="toggle_btn" href="javascript:void(0);">
                </a>
            </div>

            <a id="mobile_btn" class="mobile_btn" href="#sidebar">
                <span class="bar-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </span>
            </a>
            <ul class="nav user-menu ms-auto">
                <li class="nav-item">
                    <a class="dropdown-item text-danger" asp-controller="Account" asp-action="Logout">
                        <i class="fa fa-sign-out-alt me-1"></i> Đăng xuất
                    </a>
                </li>
            </ul>
        </div>
        @await Html.PartialAsync("_SideBar")
    @RenderBody()

    <script src="~/admin/assets/js/jquery-3.6.0.min.js"></script>
    <script src="~/admin/assets/js/feather.min.js"></script>
    <script src="~/admin/assets/js/jquery.slimscroll.min.js"></script>
    <script src="~/admin/assets/js/jquery.dataTables.min.js"></script>
    <script src="~/admin/assets/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/admin/assets/js/bootstrap.bundle.min.js"></script>
    <script src="~/admin/assets/plugins/apexchart/apexcharts.min.js"></script>
    <script src="~/admin/assets/plugins/apexchart/chart-data.js"></script>
    <script src="~/admin/assets/js/script.js"></script>
       
        <script src="~/lib/select2/js/select2.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        @RenderSection("Scripts", required: false)
 
</body>
</html>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const submenus = document.querySelectorAll('.submenu > a');

        submenus.forEach(function (menuLink) {
            menuLink.addEventListener('click', function (e) {
                e.preventDefault(); // Ngăn load trang

                // Tìm menu cha <li>
                const parentLi = this.parentElement;

                // Đóng tất cả các submenu khác
                document.querySelectorAll('.submenu').forEach(function (li) {
                    if (li !== parentLi) {
                        li.classList.remove('active');
                        const submenuUl = li.querySelector('ul');
                        if (submenuUl) submenuUl.style.display = 'none';
                    }
                });

                // Toggle submenu hiện tại
                parentLi.classList.toggle('active');
                const submenu = this.nextElementSibling;
                if (submenu && submenu.tagName === 'UL') {
                    submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
                }
            });
        });

        // Giữ menu đang active (nếu có) khi reload lại
        const currentUrl = window.location.pathname.toLowerCase();
        document.querySelectorAll('.submenu ul li a').forEach(function (link) {
            if (currentUrl === link.getAttribute('href').toLowerCase()) {
                const submenu = link.closest('.submenu');
                submenu.classList.add('active');
                submenu.querySelector('ul').style.display = 'block';
                link.classList.add('active'); // tuỳ bạn dùng thêm class để highlight
            }
        });
    });
</script>
